import{o as l,c as d,a as s,d as v,t as h,r as b,w as U,b as S,v as x,e as A,f as T,g as P,h as R,u as r,i as u,j as p,p as N,k as O,l as f,m as V,F as B,n as H,q as $,R as m,s as M,x as j}from"./vendor.3d1c9552.js";const q=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const c of t)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(t){const c={};return t.integrity&&(c.integrity=t.integrity),t.referrerpolicy&&(c.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?c.credentials="include":t.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(t){if(t.ep)return;t.ep=!0;const c=o(t);fetch(t.href,c)}};q();const W="modulepreload",C={},F="/",D=function(e,o){return!o||o.length===0?e():Promise.all(o.map(n=>{if(n=`${F}${n}`,n in C)return;C[n]=!0;const t=n.endsWith(".css"),c=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${c}`))return;const i=document.createElement("link");if(i.rel=t?"stylesheet":W,t||(i.as="script",i.crossOrigin=""),i.href=n,document.head.appendChild(i),t)return new Promise((_,I)=>{i.addEventListener("load",_),i.addEventListener("error",I)})})).then(()=>e())};var k=(a,e)=>{const o=a.__vccOpts||a;for(const[n,t]of e)o[n]=t;return o};const J={},z={class:"section"},K=s("h1",{class:"title"},"Home Page",-1),Y=[K];function G(a,e){return l(),d("div",z,Y)}var Q=k(J,[["render",G]]);const X={class:"section"},Z={class:"title"},g=v({props:{title:{type:String,default:"Hello World"}},setup(a){const e=a;return(o,n)=>(l(),d("div",X,[s("h1",Z,h(e.title),1)]))}}),ss={class:"section"},ts={class:"columns"},es={class:"column is-half is-offset-one-quarter"},os={class:"card"},ns=["onSubmit"],as=s("h1",{class:"title"},"Login Page",-1),is={class:"field"},cs={class:"control has-icons-left has-icons-right"},rs=s("span",{class:"icon is-small is-left"},[s("i",{class:"fas fa-envelope"})],-1),ls=s("span",{class:"icon is-small is-right"},[s("i",{class:"fas fa-check"})],-1),ds={class:"field"},us={class:"control has-icons-left"},_s=s("span",{class:"icon is-small is-left"},[s("i",{class:"fas fa-lock"})],-1),ps=s("div",{class:"field"},[s("p",{class:"control"},[s("button",{class:"button is-success"}," Login ")])],-1),hs=v({setup(a){const e=L(),o=b(""),n=b("");function t(){e.Login(o.value,n.value)}return(c,i)=>(l(),d("div",ss,[s("div",ts,[s("div",es,[s("div",os,[s("form",{class:"card-content",onSubmit:U(t,["prevent"])},[as,s("div",is,[s("p",cs,[S(s("input",{class:"input",type:"email",placeholder:"Email","onUpdate:modelValue":i[0]||(i[0]=_=>o.value=_)},null,512),[[x,o.value]]),rs,ls])]),s("div",ds,[s("p",us,[S(s("input",{class:"input",type:"password",placeholder:"Password","onUpdate:modelValue":i[1]||(i[1]=_=>n.value=_)},null,512),[[x,n.value]]),_s])]),ps],40,ns)])])])]))}}),vs=[{path:"/",component:Q},{path:"/about",component:g,props:{title:"About Page"}},{path:"/contact",component:g,props:{title:"Contact Page"}},{path:"/login",component:hs},{path:"/signup",component:g,props:{title:"Signup Page"}},{path:"/wall",component:()=>D(()=>import("./Wall.a4b5af75.js"),["assets/Wall.a4b5af75.js","assets/Wall.a0b51b7e.css","assets/vendor.3d1c9552.js"])},{path:"/hidden",component:g,props:{title:"You reached the Hidden Page"}}],y=A({history:T(),routes:vs,linkActiveClass:"is-active"});y.beforeEach((a,e)=>{const o=L();if(o.destinationURL==null&&a.path!=="/login"&&(o.destinationURL=a.path),["/wall","/feed","hidden"].includes(a.path)&&(console.log("requires login"),!o.user))return"/login"});const w=P("message",{state:()=>({notifications:[]}),actions:{close(a){this.notifications.splice(a,1)}}}),fs="http://localhost:3001/api/";function ms(a,e,o,n){let t={};return e&&(t={method:o!=null?o:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),fetch(fs+a,t).then(c=>c.json())}const L=P("session",{state:()=>({user:null,destinationURL:null}),actions:{async Login(a,e){var n;const o=w();try{const t=await this.api("users/login",{email:a,password:e});t&&(o.notifications.push({type:"success",message:`Welcome back ${t.firstName}`}),this.user=t,y.push((n=this.destinationURL)!=null?n:"/wall"))}catch(t){o.notifications.push({type:"danger",message:t.message})}},Logout(){this.user=null,y.push("/login")},async api(a,e,o,n){var c;const t=w();try{const i=await ms(a,e,o,n);if((c=i.errors)==null?void 0:c.length)throw{message:i.errors.join(", ")};return await i.data}catch(i){t.notifications.push({type:"danger",message:i.message})}}}});const E=a=>(N("data-v-ec79a624"),a=a(),O(),a),gs={key:0,class:"buttons"},bs=E(()=>s("strong",null,"Sign up",-1)),$s=f(" Log in "),ys={key:1,class:"buttons"},ws={class:"avatar"},ks=["src"],Ls=E(()=>s("br",null,null,-1)),Ss=v({setup(a){const e=L();return(o,n)=>{const t=R("router-link");return r(e).user?(l(),d("div",ys,[s("div",ws,[s("img",{src:r(e).user.pic},null,8,ks),s("div",null,[s("strong",null,h(r(e).user.firstName)+" "+h(r(e).user.lastName),1),Ls,s("i",null,h(r(e).user.email),1)])]),s("a",{class:"button is-primary",onClick:n[0]||(n[0]=c=>r(e).Logout())}," Log out ")])):(l(),d("div",gs,[u(t,{class:"button is-primary",to:"/signup"},{default:p(()=>[bs]),_:1}),u(t,{class:"button is-light",to:"/login"},{default:p(()=>[$s]),_:1})]))}}});var xs=k(Ss,[["__scopeId","data-v-ec79a624"]]);const Cs=a=>(N("data-v-643a8080"),a=a(),O(),a),Ps=Cs(()=>s("span",{class:"icon"},[s("i",{class:"fas fa-bell"})],-1)),Rs={key:0,class:"tag is-danger"},Ns={class:"navbar-dropdown"},Os=["onClick"],Es=v({setup(a){const e=w(),o=b(!1);return(n,t)=>(l(),d("div",null,[s("div",{class:$(["navbar-item has-dropdown",{"is-active":o.value}])},[s("a",{class:"navbar-link",onClick:t[0]||(t[0]=c=>o.value=!o.value)},[Ps,r(e).notifications.length?(l(),d("span",Rs,h(r(e).notifications.length),1)):V("",!0)]),s("div",Ns,[(l(!0),d(B,null,H(r(e).notifications,(c,i)=>(l(),d("div",{class:$(`notification is-light is-${c.type}`),key:i},[s("button",{class:"delete",onClick:_=>r(e).close(i)},null,8,Os),f(" "+h(c.message),1)],2))),128))])],2)]))}});var Is=k(Es,[["__scopeId","data-v-643a8080"]]);const Us={class:"navbar is-info",role:"navigation","aria-label":"main navigation"},As={class:"container"},Ts={class:"navbar-brand"},Vs=s("a",{class:"navbar-item",href:"https://bulma.io"},[s("img",{src:"https://bulma.io/images/bulma-logo.png",width:"112",height:"28"})],-1),Bs=s("span",{"aria-hidden":"true"},null,-1),Hs=s("span",{"aria-hidden":"true"},null,-1),Ms=s("span",{"aria-hidden":"true"},null,-1),js=[Bs,Hs,Ms],qs={class:"navbar-start"},Ws=f(" Home "),Fs=f(" Wall "),Ds={class:"navbar-item has-dropdown is-hoverable"},Js=s("a",{class:"navbar-link"}," More ",-1),zs={class:"navbar-dropdown"},Ks=f(" About "),Ys=s("a",{class:"navbar-item"}," Jobs ",-1),Gs=f(" Contact "),Qs=s("hr",{class:"navbar-divider"},null,-1),Xs=s("a",{class:"navbar-item"}," Report an issue ",-1),Zs={class:"navbar-end"},st={class:"navbar-item"},tt=s("div",{class:"navbar-item"},[s("a",{class:"bd-tw-button button","data-social-network":"Twitter","data-social-action":"tweet","data-social-target":"https://bulma.io",target:"_blank",href:"https://twitter.com/intent/tweet?text=Bulma: a modern CSS framework based on Flexbox&hashtags=bulmaio&url=https://bulma.io&via=jgthms"},[s("span",{class:"icon"},[s("i",{class:"fab fa-twitter"})]),s("span",null," Tweet ")])],-1),et=v({setup(a){const e=b(!1);return(o,n)=>(l(),d("nav",Us,[s("div",As,[s("div",Ts,[Vs,s("a",{role:"button",class:$(["navbar-burger",{"is-active":e.value}]),"aria-label":"menu","aria-expanded":"false",onClick:n[0]||(n[0]=t=>e.value=!e.value)},js,2)]),s("div",{class:$(["navbar-menu",{"is-active":e.value}])},[s("div",qs,[u(r(m),{to:"/",class:"navbar-item"},{default:p(()=>[Ws]),_:1}),u(r(m),{to:"/wall",class:"navbar-item"},{default:p(()=>[Fs]),_:1}),s("div",Ds,[Js,s("div",zs,[u(r(m),{to:"/about",class:"navbar-item"},{default:p(()=>[Ks]),_:1}),Ys,u(r(m),{class:"navbar-item",to:"/contact"},{default:p(()=>[Gs]),_:1}),Qs,Xs])])]),s("div",Zs,[s("div",st,[u(xs)]),u(Is),tt])],2)])]))}}),ot={class:"container"},nt=v({setup(a){return(e,o)=>{const n=R("router-view");return l(),d("div",null,[u(et),s("div",ot,[u(n)])])}}});M(nt).use(y).use(j()).mount("#app");export{ms as a};
